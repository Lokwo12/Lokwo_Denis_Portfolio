{% extends 'base.html' %}

{% load static site_extras %}

{% block title %}Home ‚Äî Denis Lokwo{% endblock %}

{% block content %}
<section class="hero container">
	<div class="hero-grid">
		<div class="intro">
			<span class="eyebrow fade-up stagger-1">{{ SITE.home_eyebrow|default:PROFILE.title|default:'Software Developer' }}</span>
			<h1 class="title fade-up stagger-2">{{ SITE.hero_heading|default:"Hi, I'm "|add:PROFILE.name|add:" ‚Äî I build delightful web apps for the modern web." }}</h1>
			<p class="lead fade-up stagger-3">{{ SITE.hero_subheading|default:PROFILE.intro|default:PROFILE.summary|default:"I'm a full-stack developer focused on performance, accessibility, and clean UX. I enjoy turning ideas into production-quality code and mentoring junior engineers." }}</p>

			<div class="roles-line pill fade-up stagger-3" aria-label="Rotating roles">
				<span class="sparkle-icon" aria-hidden="true">
					<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
						<path d="M12 2l1.7 4.6L18 8.3l-4.3 1.7L12 14l-1.7-4.1L6 8.3l4.3-1.7L12 2zm7 6l.9 2.4L22 12l-2.1 1.6L19 16l-.9-2.4L16 12l2.1-1.6L19 8zm-14 0l.9 2.4L8 12l-2.1 1.6L5 16l-.9-2.4L2 12l2.1-1.6L5 8z"/>
					</svg>
				</span>
				<span class="roles-label">Focus:</span>
				<span class="type-wrap"><span data-roles="{{ SITE.home_roles|default:'React Developer|Django Developer|Open Source Contributor' }}" data-speed="80" data-pause="800" data-back-pause="350"></span></span>
			</div>

            <div class="cta-row fade-up stagger-3">
				<a class="btn" href="#projects">View Projects</a>
				<a class="btn secondary" href="/contact/">Get in touch</a>
				{% if SITE.resume_url %}
				<a class="btn secondary" href="{{ SITE.resume_url }}" download>Download CV</a>
				{% else %}
				<a class="btn secondary" href="{% static 'resume/Denis_Lokwo_Resume.pdf' %}" download>Download CV</a>
				{% endif %}
				<a class="btn" href="{% url 'portfolio:portfolio_pdf' %}">Download Portfolio PDF</a>
			</div>
		</div>

			<div style="display:flex;gap:18px;align-items:flex-start">
				<div class="profile-card fade-up stagger-1">
					<div class="avatar">
						{% if SITE.home_avatar_url %}
						<img src="{{ SITE.home_avatar_url }}" alt="{{ PROFILE.name }} avatar">
						{% elif PROFILE.avatar_url %}
						<img src="{{ PROFILE.avatar_url }}" alt="{{ PROFILE.name }} avatar">
						{% else %}
						<img src="{% static 'images/avatar.svg' %}" alt="{{ PROFILE.name }} avatar">
						{% endif %}
					</div>
					<div class="profile-meta">
						<h4>{{ PROFILE.name }}</h4>
						<p>{{ PROFILE.title|default:'Full-stack developer ‚Äî Django, React, TypeScript, PostgreSQL.' }}</p>
					</div>
				</div>
			</div>
	</div>
</section>

{% if featured_project %}
<section class="container" style="padding:10px 0 10px">
	<div class="featured-project">
		<div class="fp-content">
			<h2 class="fp-title">Featured Project ‚Äî {{ featured_project.title }}</h2>
			<p class="meta">{{ featured_project.category|default:'General' }} ‚Ä¢ {{ featured_project.date|date:'F Y' }}</p>
			<p class="lead">{{ featured_project.description|truncatewords:36 }}</p>
			{% with techs=featured_project.tech_list %}
			{% if techs %}
				<div class="tech-chips" style="margin:8px 0 14px">
					{% for t in techs %}<span class="chip">{% tech_icon t 16 %} {{ t }}</span>{% endfor %}
				</div>
			{% endif %}
			{% endwith %}
			<div class="cta-row">
				{% if featured_project.url %}
				<a class="btn" href="{{ featured_project.url }}" target="_blank" rel="noopener" data-ev="project_view_live" data-project="{{ featured_project.title }}" data-url="{{ featured_project.url }}">View live</a>
				{% endif %}
				<a class="btn" href="{{ featured_project.get_absolute_url }}" data-ev="case_study_open" data-project="{{ featured_project.title }}" data-slug="{{ featured_project.slug }}">Read case study</a>
				<a class="btn secondary" href="/projects/">All projects</a>
			</div>
		</div>
		{% if featured_project.image %}
		<div class="fp-media">
			<img src="{{ featured_project.image.url }}" alt="{{ featured_project.title }} screenshot" loading="lazy">
		</div>
		{% endif %}
	</div>
	<hr style="border:none;border-top:1px solid var(--border);margin:18px 0 0" />
</section>
{% endif %}

	<section class="container" style="padding:10px 0 0">
		<div class="stats-row">
			<div class="stat">
				<div class="stat-value">{{ stats.years }}+</div>
				<div class="stat-label">Years Experience</div>
			</div>
			<div class="stat">
				<div class="stat-value">{{ stats.projects }}</div>
				<div class="stat-label">Projects</div>
			</div>
			<div class="stat">
				<div class="stat-value">{{ stats.posts }}</div>
				<div class="stat-label">Blog Posts</div>
			</div>
		</div>
	</section>

	{# Tech Stack wall #}
	{% if PROFILE.skills or PROFILE.tools %}
	<section class="container" style="padding:24px 0 10px">
		<h2 style="margin:0 0 12px">Tech Stack</h2>
		<div class="tech-wall">
			{% if PROFILE.skills %}
				{% for t in PROFILE.skills %}
				<div class="tech-tile">
					<div class="tech-icon">{% tech_icon t 28 %}</div>
					<div class="tech-label">{{ t }}</div>
				</div>
				{% endfor %}
			{% endif %}
			{% if PROFILE.tools %}
				{% for t in PROFILE.tools %}
				<div class="tech-tile">
					<div class="tech-icon">{% tech_icon t 28 %}</div>
					<div class="tech-label">{{ t }}</div>
				</div>
				{% endfor %}
			{% endif %}
		</div>
	</section>
	{% endif %}

	<!-- Projects -->
	<section id="projects" class="container" style="padding:50px 0">
		<h2 style="margin-top:0">Selected Projects</h2>
		{% if projects %}
		<div class="carousel" aria-roledescription="carousel" tabindex="0" aria-label="Selected Projects carousel">
			<div class="carousel-track" role="group" aria-label="Project slides">
				{% for p in projects %}
				<article class="project-card" data-effect="slide-up">
					{% if p.image %}
					<div class="card-media">
						<a href="{{ p.get_absolute_url }}" aria-label="View {{ p.title }}">
							<img src="{{ p.image.url }}" alt="{{ p.title }} thumbnail" loading="lazy" decoding="async" fetchpriority="low" sizes="(max-width: 700px) 100vw, 50vw">
						</a>
					</div>
					{% endif %}
					<h3 style="margin:0 0 6px"><a href="{{ p.get_absolute_url }}">{{ p.title }}</a></h3>
					<p class="meta">{{ p.category|default:'General' }} ‚Ä¢ {{ p.date|date:'M Y' }}</p>
					<p class="lead">{{ p.description|default:'No description provided.'|truncatewords:24 }}</p>
					{% with techs=p.tech_list %}
					{% if techs %}
					<div class="tech-chips">
						{% for t in techs %}<span class="chip">{% tech_icon t 16 %} {{ t }}</span>{% endfor %}
					</div>
					{% endif %}
					{% endwith %}
					<div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:8px">
						<a class="btn" href="{{ p.get_absolute_url }}" data-ev="case_study_open" data-project="{{ p.title }}" data-slug="{{ p.slug }}">Read case study</a>
						{% if p.url %}<a class="btn secondary" href="{{ p.url }}" target="_blank" rel="noopener" data-ev="project_view_live" data-project="{{ p.title }}" data-url="{{ p.url }}">View live</a>{% endif %}
					</div>
				</article>
				{% endfor %}
			</div>
			<div class="carousel-nav" aria-hidden="false">
				<button class="carousel-prev" aria-label="Previous slide">‚Äπ</button>
				<button class="carousel-next" aria-label="Next slide">‚Ä∫</button>
			</div>
		</div>
		<a class="btn secondary" style="margin-top:16px" href="/projects/">Browse all projects</a>
		{% else %}
		<p class="muted">No projects yet.</p>
		{% endif %}
	</section>

	{% if top_tags %}
	<section class="container" style="padding:10px 0 30px">
		<h3 style="margin:0 0 10px">Top Technologies</h3>
		<div class="tech-chips">
			{% for t in top_tags %}<span class="chip">{% tech_icon t 16 %} {{ t }}</span>{% endfor %}
		</div>
	</section>
	{% endif %}

	<!-- Testimonials -->
	{% if testimonials_enabled %}
	<section class="container" style="padding:20px 0 10px">
		{% if testimonials %}
		<h2 style="margin-top:0">What clients say</h2>
		<div class="cards-grid testimonials-grid">
			{% for t in testimonials %}
			<article class="profile-card testimonial-card" data-effect="zoom-in">
				{% if t.image %}<img class="contact-avatar" src="{{ t.image.url }}" alt="{{ t.name }} avatar" loading="lazy">{% endif %}
				<p class="lead">‚Äú{{ t.content|truncatewords:32 }}‚Äù</p>
				<p class="meta">‚Äî {{ t.name }}{% if t.role %}, {{ t.role }}{% endif %}</p>
			</article>
			{% endfor %}
		</div>
		<a class="btn secondary" href="{% url 'portfolio:testimonials' %}" style="margin-top:14px">See all testimonials</a>
		{% endif %}
	</section>
	{% endif %}
					{% if featured_post %}
					<article class="blog-post" style="border-left:3px solid var(--accent)">
						<h3><a href="{{ featured_post.get_absolute_url }}">üìå Featured: {{ featured_post.title }}</a></h3>
						<p class="meta">By {{ featured_post.author }} on {{ featured_post.created_at|date:"F j, Y" }}</p>
						<p>{{ featured_post.content|truncatewords:30 }}</p>
					</article>
					{% endif %}

<!-- Contact section removed: dedicated /contact/ page is now the primary contact entry point -->

	<!-- Blog preview section -->
<section class="blog-list container" style="margin-top:48px;">
    <h2>Latest Blog Posts</h2>
    {% with posts=posts|default:None %}
    {% if posts %}
        {% for post in posts|slice:":3" %}
            <article class="blog-post">
				 <h3><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h3>
                <p class="meta">By {{ post.author }} on {{ post.created_at|date:"F j, Y" }}</p>
                <p>{{ post.content|truncatewords:30 }}</p>
            </article>
        {% endfor %}
        <a class="btn secondary" href="/blog/">View all blog posts</a>
    {% else %}
        <p class="muted">No blog posts yet. Stay tuned.</p>
    {% endif %}
    {% endwith %}
</section>

{% block extra_js %}
<script src="{% static 'js/home.js' %}"></script>
{% endblock %}

{% block extra_css %}{% endblock %}
{% endblock %}
