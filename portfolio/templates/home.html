{% extends 'base.html' %}

{% load static %}

{% block title %}Home — Denis Lokwo{% endblock %}

{% block content %}
<section class="hero container">
	<div class="hero-grid">
		<div class="intro">
			<span class="eyebrow fade-up stagger-1">Software Developer</span>
			<h1 class="title fade-up stagger-2">Hi, I'm Denis — I build delightful web apps for the modern web.</h1>
			<p class="lead fade-up stagger-3">I'm a full-stack developer focused on performance, accessibility, and clean UX. I enjoy turning ideas into production-quality code and mentoring junior engineers.</p>

			<div class="cta-row fade-up stagger-3">
				<a class="btn" href="#projects">View Projects</a>
				<a class="btn secondary" href="#contact">Get in touch</a>
                <a class="btn secondary" href="{% static 'resume/Denis_Lokwo_Resume.pdf' %}" download>Download CV</a>
				<span class="type-wrap" aria-hidden="true"><span data-roles="React Developer|Django Developer|Open Source Contributor" class="stagger-1"></span></span>
			</div>
		</div>

			<div style="display:flex;gap:18px;align-items:flex-start">
				<div class="social-vertical fade-up stagger-2" aria-hidden="false">
					<a class="icon" href="https://github.com/Lokwo12" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
						<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 .5C5.73.5.75 5.48.75 11.75c0 4.95 3.22 9.14 7.69 10.62.56.1.77-.24.77-.54 0-.27-.01-1-.01-1.95-3.13.68-3.79-1.38-3.79-1.38-.51-1.29-1.25-1.63-1.25-1.63-1.02-.7.08-.68.08-.68 1.13.08 1.73 1.16 1.73 1.16 1 .17 1.53-.75 1.53-.75.9-1.53 2.36-1.09 2.94-.83.09-.66.39-1.09.71-1.34-2.5-.28-5.14-1.25-5.14-5.58 0-1.23.44-2.23 1.16-3.02-.12-.28-.5-1.42.11-2.96 0 0 .95-.3 3.12 1.15.9-.25 1.87-.37 2.83-.38.96.01 1.93.13 2.84.38 2.16-1.45 3.11-1.15 3.11-1.15.62 1.54.24 2.68.12 2.96.73.79 1.16 1.79 1.16 3.02 0 4.34-2.64 5.29-5.15 5.57.4.35.76 1.05.76 2.12 0 1.53-.01 2.77-.01 3.15 0 .3.2.65.78.54C19.04 20.89 22.25 16.7 22.25 11.75 22.25 5.48 17.27.5 12 .5z"/></svg>
					</a>
					<a class="icon" href="https://www.linkedin.com/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
						<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M4.98 3.5C4.98 4.88 3.86 6 2.48 6S0 4.88 0 3.5 1.12 1 2.5 1 4.98 2.12 4.98 3.5zM0 8h5v16H0V8zm7.5 0H12v2.2h.1c.6-1.1 2.1-2.2 4.3-2.2 4.6 0 5.5 3 5.5 6.9V24h-5V15.2c0-2.1 0-4.8-2.9-4.8-2.9 0-3.3 2.2-3.3 4.6V24h-5V8z"/></svg>
					</a>
					<a class="icon" href="https://twitter.com/" target="_blank" rel="noopener noreferrer" aria-label="Twitter">
						<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M22.46 6c-.77.35-1.6.59-2.46.7a4.27 4.27 0 0 0 1.88-2.36c-.83.5-1.76.86-2.75 1.05A4.24 4.24 0 0 0 11.5 9.5c0 .33.03.66.11.97-3.52-.18-6.64-1.86-8.73-4.42-.36.6-.57 1.3-.57 2.04 0 1.4.71 2.63 1.79 3.35-.66-.02-1.29-.2-1.84-.5v.05c0 1.96 1.4 3.6 3.26 3.97-.34.09-.7.14-1.07.14-.26 0-.52-.03-.77-.07.52 1.63 2.04 2.82 3.84 2.85A8.53 8.53 0 0 1 2 19.54 12.05 12.05 0 0 0 8.29 21c7.55 0 11.68-6.26 11.68-11.68l-.01-.53A8.2 8.2 0 0 0 22.46 6z"/></svg>
					</a>
				</div>

				<div class="profile-card fade-up stagger-1">
					<div class="avatar"><img src="{% static 'images/avatar.svg' %}" alt="Denis Lokwo avatar" style="width:100%;height:auto;border-radius:10px;display:block"></div>
					<div class="profile-meta">
						<h4>Denis Lokwo</h4>
						<p>Full-stack developer — Django, React, TypeScript, PostgreSQL.</p>
					</div>
				</div>
			</div>
	</div>
</section>

	<!-- Projects -->
	<section id="projects" class="container" style="padding:50px 0">
		<h2 style="margin-top:0">Selected Projects</h2>
		<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px">
               <article class="profile-card blog-card">
				<h3>Project One</h3>
				<p class="lead">A short description of a project that showcases skills in Django and React.</p>
				<a class="btn" href="#">View</a>
			</article>
               <article class="profile-card blog-card">
				<h3>Project Two</h3>
				<p class="lead">A backend-heavy project with message queues and data pipelines.</p>
				<a class="btn" href="#">View</a>
			</article>
               <article class="profile-card blog-card">
				<h3>Project Three</h3>
				<p class="lead">Open source contributions and tooling for developer experience.</p>
				<a class="btn" href="#">View</a>
			</article>
		</div>
	</section>

	<!-- Contact section improvement -->
<section id="contact" class="container" style="padding:50px 0;max-width:600px;margin:0 auto;">
    <h2>Contact Me</h2>
    <form action="{% url 'portfolio:contact' %}" method="post" novalidate style="display:flex;flex-direction:column;gap:18px;">
        {% csrf_token %}
        {% for field in form.visible_fields %}
            <div>
                <label for="{{ field.id_for_label }}" style="font-weight:600;">{{ field.label }}</label>
                {{ field }}
                {% if field.errors %}
                    <div style="color:#ef4444;font-size:0.95rem;margin-top:4px;">{{ field.errors|striptags }}</div>
                {% endif %}
            </div>
        {% endfor %}
        <button type="submit" class="btn">Send Message</button>
    </form>
    {% if messages %}
        <div aria-live="polite" style="margin-top:18px;">
            {% for message in messages %}
                <div style="color:#22c55e;font-weight:600;">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}
    <div style="margin-top:32px;">
        <a href="https://wa.me/1234567890" class="btn secondary" target="_blank">Contact via WhatsApp</a>
    </div>
</section>

	<!-- Blog preview section -->
<section class="blog-list container" style="margin-top:48px;">
    <h2>Latest Blog Posts</h2>
    {% with posts=posts|default:None %}
    {% if posts %}
        {% for post in posts|slice:":3" %}
            <article class="blog-post">
                <h3><a href="/blog/{{ post.slug }}/">{{ post.title }}</a></h3>
                <p class="meta">By {{ post.author }} on {{ post.created_at|date:"F j, Y" }}</p>
                <p>{{ post.content|truncatewords:30 }}</p>
            </article>
        {% endfor %}
        <a class="btn secondary" href="/blog/">View all blog posts</a>
    {% else %}
        <p>No blog posts found.</p>
    {% endif %}
    {% endwith %}
</section>

	<!-- Projects preview section -->
<section class="container" style="margin-top:48px;">
    <h2>Featured Projects</h2>
    {% with projects=projects|default:None %}
    {% if projects %}
        {% for project in projects|slice:":3" %}
            <div class="profile-card project-card" style="background:var(--card);border-radius:14px;padding:24px 28px;margin-bottom:32px;box-shadow:0 2px 12px rgba(2,6,23,0.12);">
                <h3>{{ project.title }}</h3>
                <p class="meta">{{ project.category }} | {{ project.date|date:"F Y" }}</p>
                <p>{{ project.description|truncatewords:30 }}</p>
                <p><strong>Technologies:</strong> {{ project.technologies }}</p>
                {% if project.url %}<a href="{{ project.url }}" class="btn secondary" target="_blank">View Project</a>{% endif %}
            </div>
        {% endfor %}
        <a class="btn secondary" href="/projects/">View all projects</a>
    {% else %}
        <p>No projects found.</p>
    {% endif %}
    {% endwith %}
</section>

	<!-- Testimonials section with images and animation -->
<section class="container" style="margin:48px auto;max-width:900px;">
    <h2>Testimonials</h2>
    <div class="testimonials-list" style="display:flex;gap:24px;flex-wrap:wrap;">
        {% for t in testimonials %}
            <div class="profile-card testimonial-card fade-up" style="flex:1;min-width:260px;transition:transform 0.3s, box-shadow 0.3s;">
                <div style="display:flex;align-items:center;gap:14px;margin-bottom:12px;">
                    {% if t.image %}
                        <img src="{{ t.image.url }}" alt="{{ t.name }}" style="width:64px;height:64px;border-radius:50%;object-fit:cover;box-shadow:0 2px 12px rgba(2,6,23,0.12);">
                    {% else %}
                        <img src="{% static 'images/avatar.svg' %}" alt="{{ t.name }}" style="width:64px;height:64px;border-radius:50%;object-fit:cover;opacity:0.7;">
                    {% endif %}
                    <div>
                        <div style="font-weight:600;">{{ t.name }}</div>
                        {% if t.role %}<div style="color:var(--muted);font-size:0.95rem;">{{ t.role }}</div>{% endif %}
                    </div>
                </div>
                <blockquote style="font-size:1.08rem;color:var(--muted);margin:0 0 12px 0;">“{{ t.content }}”</blockquote>
            </div>
        {% empty %}
            <p>No testimonials yet.</p>
        {% endfor %}
    </div>
</section>
<section class="container" style="margin:48px auto;max-width:900px;">
    <h2>Download My Resume</h2>
    <a href="{% static 'resume/Denis_Lokwo_Resume.pdf' %}" class="btn" download style="font-size:1.1rem;margin-top:12px;">
        <svg style="vertical-align:middle;margin-right:8px;" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path d="M9 2a1 1 0 0 1 2 0v8h3l-4 4-4-4h3V2z"/><path d="M3 16a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-2a1 1 0 1 0-2 0v2H5v-2a1 1 0 1 0-2 0v2z"/></svg>
        Download PDF
    </a>
</section>
<script>
// Simple fade-up animation for testimonials
window.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.testimonial-card').forEach(function(card, i) {
        card.style.opacity = 0;
        card.style.transform = 'translateY(30px)';
        setTimeout(function() {
            card.style.transition = 'opacity 0.6s, transform 0.6s';
            card.style.opacity = 1;
            card.style.transform = 'translateY(0)';
        }, 200 + i * 200);
    });
});

// Animate blog, projects, and testimonials sections on scroll
function animateOnScroll(selector, animation) {
    const elements = document.querySelectorAll(selector);
    function check() {
        elements.forEach(el => {
            const rect = el.getBoundingClientRect();
            if (rect.top < window.innerHeight - 60) {
                el.classList.add(animation);
            }
        });
    }
    window.addEventListener('scroll', check);
    check();
}
window.addEventListener('DOMContentLoaded', function() {
    animateOnScroll('.blog-card', 'fade-in');
    animateOnScroll('.project-card', 'slide-up');
    animateOnScroll('.testimonial-card', 'fade-up');
});

// Random animation effects for homepage cards
const blogEffects = ['fade-in', 'slide-up', 'zoom-in'];
const projectEffects = ['slide-up', 'fade-in', 'flip-in'];
const testimonialEffects = ['fade-up', 'zoom-in', 'rotate-in'];
function randomEffect(effects) {
    return effects[Math.floor(Math.random() * effects.length)];
}
function animateRandomOnScroll(selector, effects) {
    const elements = document.querySelectorAll(selector);
    elements.forEach((el, i) => {
        const effect = randomEffect(effects);
        el.classList.add('pre-anim');
        el.setAttribute('data-effect', effect);
    });
    function check() {
        elements.forEach(el => {
            const rect = el.getBoundingClientRect();
            if (rect.top < window.innerHeight - 60) {
                el.classList.add(el.getAttribute('data-effect'));
            }
        });
    }
    window.addEventListener('scroll', check);
    check();
}
window.addEventListener('DOMContentLoaded', function() {
    animateRandomOnScroll('.blog-card', blogEffects);
    animateRandomOnScroll('.project-card', projectEffects);
    animateRandomOnScroll('.testimonial-card', testimonialEffects);
});
</script>
<style>
.pre-anim { opacity: 0; transform: translateY(30px); }
.fade-in { opacity: 1 !important; transform: none !important; transition: opacity 0.7s, transform 0.7s; }
.blog-card { opacity: 0; transform: translateY(30px); }
.slide-up { opacity: 1 !important; transform: translateY(0) !important; transition: opacity 0.7s, transform 0.7s; }
.project-card { opacity: 0; transform: translateY(40px); }
.zoom-in { opacity: 1 !important; transform: scale(1) !important; transition: opacity 0.7s, transform 0.7s; }
.flip-in { opacity: 1 !important; transform: rotateY(0deg) !important; transition: opacity 0.7s, transform 0.7s; }
.rotate-in { opacity: 1 !important; transform: rotate(0deg) !important; transition: opacity 0.7s, transform 0.7s; }
.testimonial-card.rotate-in { transform: rotate(-8deg); }
.project-card.flip-in { transform: rotateY(90deg); }
.blog-card.zoom-in, .testimonial-card.zoom-in { transform: scale(0.8); }
.blog-card:hover, .project-card:hover, .testimonial-card:hover {
    box-shadow: 0 8px 32px rgba(0,0,0,0.18);
    transform: scale(1.04) rotate(-1deg);
    z-index: 2;
    transition: box-shadow 0.3s, transform 0.3s;
}
.blog-card[data-effect="flip-in"]:hover {
    transform: scale(1.04) rotateY(8deg);
}
.project-card[data-effect="flip-in"]:hover {
    transform: scale(1.04) rotateY(-8deg);
}
.testimonial-card[data-effect="rotate-in"]:hover {
    transform: scale(1.04) rotate(8deg);
}
</style>
{% endblock %}
